<h1>Ore erogate per commessa e per dipendente con commenti giornalieri</h1>
<hr>
<section id="ggcommessautentewithcomments" class="ehourtables">
	<div class="top">
	</div>
	<div class="center">
		<div class="list-group">
			<div ng-controller="giorniCommessaUtenteWithCommentsController as ggCommessaUtWCommCtrl">
				<!-- <div class="csvsaverdiv"> -->
				<form class="saverdiv">
					<!--input id="XLSreader" name="XLSreader" type="file">Carica un excel</input-->
					<button class="btn btn-default csvsaver" ng-click="saveCSV()">
						Esporta CSV
					</button>
					<button class="btn btn-default xlssaver" ng-click="saveXLS()">
						Esporta XLS
					</button>
				</form>

				<form>
					<table class="grouping">
						<thead>
							<tr class="groupingLegend">
								<th colspan="10">
									<h4>
										Raggruppa per:
									</h4>
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="groupingCheckboxes">
								<td></td>
								<td ng-repeat="item in tableGrouping.items">
									<md-checkbox class="item-checkbox"
										ng-checked="tableGrouping.exists(item, tableGrouping.selected)"
										ng-click="tableGrouping.toggle(item, tableGrouping.selected)">
										{{ item.label }}
									</md-checkbox>
								</td>
								<td></td>
								<td></td>
							</tr>
						</tbody>
					</table>
				</form>

				<table ng-table="ggCommessaUtWCommCtrl.tableParams"
					class="table table-bordered table-striped table-condensed ehourdata"
					show-filter="true">

					<tr class="ng-table-group" ng-repeat-start="group in $groups">
						<td colspan="10">
							<a href="" ng-click="group.$hideRows = !group.$hideRows">
								<span class="glyphicon"
									ng-class="{ 'glyphicon-chevron-right': group.$hideRows, 'glyphicon-chevron-down': !group.$hideRows }">
								</span>
								<strong>{{ group.value }}</strong>
							</a>
						</td>
					</tr>

					<tr ng-hide="group.$hideRows" ng-repeat="row in group.data">
						<td data-title="'ANNO'" filter="ggCommessaUtWCommCtrl.yearFilterByInterval" sortable="'anno'">
							{{row.anno}}
						</td>
						<td data-title="'MESE'" filter="ggCommessaUtWCommCtrl.monthFilterByInterval" sortable="'mese'">
							{{row.mese}}
						</td>
						<td data-title="'GIORNO DEL MESE'" filter="{dayOfMonth: 'text'}" sortable="'dayOfMonth'">
							{{row.dayOfMonth}}
						</td>
						<td data-title="'CLIENTE'" filter="{nomeCliente: 'text'}" sortable="'nomeCliente'">
							{{row.nomeCliente}}
						</td>
						<td data-title="'CODICE PROGETTO'" filter="{codiceProgetto: 'text'}" sortable="'codiceProgetto'">
							<a ui-sref="projectdetail({projectId: {{row.idProgetto}}})">
								{{row.codiceProgetto}}
							</a>
						</td>
						<td data-title="'PROGETTO'" filter="{nomeProgetto: 'text'}" sortable="'nomeProgetto'">
							<a ui-sref="projectdetail({projectId: {{row.idProgetto}}})">
								{{row.nomeProgetto}}
							</a>
						</td>
						<td data-title="'NOME'" filter="{nomeDipendente: 'text'}" sortable="'nomeDipendente'">
							{{row.nomeDipendente}}
						</td>
						<td data-title="'COGNOME'" filter="{cognomeDipendente: 'text'}" sortable="'cognomeDipendente'">
							{{row.cognomeDipendente}}
						</td>
						<td data-title="'COMMENTO'" sortable="'comment'">
							{{row.comment}}
						</td>
						<td data-title="'ORE'" sortable="'oreMese'">
							{{row.oreMese}}
						</td>
					</tr>

					<tr class="ggcommessautenteTableTotals" ng-repeat-end>
						<td colspan="9" class="text-success text-left">
							<strong>Totali:</strong>
						</td>
						<td>
							<em>{{ sumGrouped(group.data, "oreMese").toFixed(2).replace(".",",") }}</em>
						</td>
					</tr>

					<tfoot ng-if="isLastPage()">
						<tr>
							<td colspan="9" class="text-success text-left">
								<strong>Totali complessivi:</strong>
							</td>
							<td>
								<em>{{ totalHours }}</em>
							</td>
						</tr>
					</tfoot>

			  </table>
			</div>
		</div>
	</div>
	<hr>
</section>
